jest.mock('redux-saga');
import { mocked } from 'ts-jest/utils';
import { eventChannel } from 'redux-saga';
import { createNetInfoConnectionChangeChannel, createIntervalChannel, intervalChannelFn, } from '../redux/sagas';
describe('createNetInfoConnectionChangeChannel', function () {
    it('returns a redux-saga channel', function () {
        var eventChannelMock = jest.fn().mockReturnValue('channel');
        mocked(eventChannel).mockImplementation(eventChannelMock);
        var mockNetInfoChannelFn = jest.fn().mockReturnValue('handlerFn');
        expect(createNetInfoConnectionChangeChannel(mockNetInfoChannelFn)).toBe('channel');
        expect(eventChannelMock).toHaveBeenCalledWith(mockNetInfoChannelFn);
    });
});
describe('createIntervalChannel', function () {
    var interval = 50;
    it('returns a redux-saga channel', function () {
        var eventChannelMock = jest.fn().mockReturnValue('channel');
        mocked(eventChannel).mockImplementation(eventChannelMock);
        var mockIntervalChannelFn = jest.fn().mockReturnValue('handlerFn');
        expect(createIntervalChannel(interval, mockIntervalChannelFn)).toBe('channel');
        expect(mockIntervalChannelFn).toHaveBeenCalledWith(interval);
        expect(eventChannel).toHaveBeenCalledWith('handlerFn');
    });
    it('intervalChannelFn adheres to eventChannel cb interface', function (done) {
        global.clearInterval = jest.fn();
        var emitMock = jest.fn();
        var unsubscribe = intervalChannelFn(interval)(emitMock);
        setTimeout(function () {
            expect(emitMock).toHaveBeenCalledWith(true);
            done();
        }, interval + 20);
        unsubscribe();
        expect(global.clearInterval).toHaveBeenCalled();
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL0RldkFDL0Rlc2t0b3AvQW5nYXphL3JlYWN0LW9mZmxpbmUtc3luYy9zcmMvdGVzdC9zYWdhQ2hhbm5lbHMudGVzdC50cyIsIm1hcHBpbmdzIjoiQUFRQSxJQUFJLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDO0FBUnhCLE9BQU8sRUFBRSxNQUFNLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDdkMsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLFlBQVksQ0FBQztBQUMxQyxPQUFPLEVBQ0wsb0NBQW9DLEVBQ3BDLHFCQUFxQixFQUNyQixpQkFBaUIsR0FDbEIsTUFBTSxnQkFBZ0IsQ0FBQztBQUl4QixRQUFRLENBQUMsc0NBQXNDLEVBQUU7SUFDL0MsRUFBRSxDQUFDLDhCQUE4QixFQUFFO1FBQ2pDLElBQU0sZ0JBQWdCLEdBQUcsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDLGVBQWUsQ0FBQyxTQUFTLENBQUMsQ0FBQztRQUM5RCxNQUFNLENBQUMsWUFBWSxDQUFDLENBQUMsa0JBQWtCLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztRQUMxRCxJQUFNLG9CQUFvQixHQUFHLElBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxlQUFlLENBQUMsV0FBVyxDQUFDLENBQUM7UUFDcEUsTUFBTSxDQUFDLG9DQUFvQyxDQUFDLG9CQUFvQixDQUFDLENBQUMsQ0FBQyxJQUFJLENBQ3JFLFNBQVMsQ0FDVixDQUFDO1FBQ0YsTUFBTSxDQUFDLGdCQUFnQixDQUFDLENBQUMsb0JBQW9CLENBQUMsb0JBQW9CLENBQUMsQ0FBQztJQUN0RSxDQUFDLENBQUMsQ0FBQztBQUVMLENBQUMsQ0FBQyxDQUFDO0FBRUgsUUFBUSxDQUFDLHVCQUF1QixFQUFFO0lBQ2hDLElBQU0sUUFBUSxHQUFHLEVBQUUsQ0FBQztJQUNwQixFQUFFLENBQUMsOEJBQThCLEVBQUU7UUFDakMsSUFBTSxnQkFBZ0IsR0FBRyxJQUFJLENBQUMsRUFBRSxFQUFFLENBQUMsZUFBZSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1FBQzlELE1BQU0sQ0FBQyxZQUFZLENBQUMsQ0FBQyxrQkFBa0IsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO1FBQzFELElBQU0scUJBQXFCLEdBQUcsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDLGVBQWUsQ0FBQyxXQUFXLENBQUMsQ0FBQztRQUNyRSxNQUFNLENBQUMscUJBQXFCLENBQUMsUUFBUSxFQUFFLHFCQUFxQixDQUFDLENBQUMsQ0FBQyxJQUFJLENBQ2pFLFNBQVMsQ0FDVixDQUFDO1FBQ0YsTUFBTSxDQUFDLHFCQUFxQixDQUFDLENBQUMsb0JBQW9CLENBQUMsUUFBUSxDQUFDLENBQUM7UUFDN0QsTUFBTSxDQUFDLFlBQVksQ0FBQyxDQUFDLG9CQUFvQixDQUFDLFdBQVcsQ0FBQyxDQUFDO0lBQ3pELENBQUMsQ0FBQyxDQUFDO0lBRUgsRUFBRSxDQUFDLHdEQUF3RCxFQUFFLFVBQUEsSUFBSTtRQUMvRCxNQUFNLENBQUMsYUFBYSxHQUFHLElBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQztRQUNqQyxJQUFNLFFBQVEsR0FBRyxJQUFJLENBQUMsRUFBRSxFQUFFLENBQUM7UUFDM0IsSUFBTSxXQUFXLEdBQUcsaUJBQWlCLENBQUMsUUFBUSxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUM7UUFDMUQsVUFBVSxDQUFDO1lBQ1QsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDLG9CQUFvQixDQUFDLElBQUksQ0FBQyxDQUFDO1lBQzVDLElBQUksRUFBRSxDQUFDO1FBQ1QsQ0FBQyxFQUFFLFFBQVEsR0FBRyxFQUFFLENBQUMsQ0FBQztRQUNsQixXQUFXLEVBQUUsQ0FBQztRQUNkLE1BQU0sQ0FBQyxNQUFNLENBQUMsYUFBYSxDQUFDLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQztJQUNsRCxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9Vc2Vycy9EZXZBQy9EZXNrdG9wL0FuZ2F6YS9yZWFjdC1vZmZsaW5lLXN5bmMvc3JjL3Rlc3Qvc2FnYUNoYW5uZWxzLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgbW9ja2VkIH0gZnJvbSAndHMtamVzdC91dGlscyc7XG5pbXBvcnQgeyBldmVudENoYW5uZWwgfSBmcm9tICdyZWR1eC1zYWdhJztcbmltcG9ydCB7XG4gIGNyZWF0ZU5ldEluZm9Db25uZWN0aW9uQ2hhbmdlQ2hhbm5lbCxcbiAgY3JlYXRlSW50ZXJ2YWxDaGFubmVsLFxuICBpbnRlcnZhbENoYW5uZWxGbixcbn0gZnJvbSAnLi4vcmVkdXgvc2FnYXMnO1xuXG5qZXN0Lm1vY2soJ3JlZHV4LXNhZ2EnKTtcblxuZGVzY3JpYmUoJ2NyZWF0ZU5ldEluZm9Db25uZWN0aW9uQ2hhbmdlQ2hhbm5lbCcsICgpID0+IHtcbiAgaXQoJ3JldHVybnMgYSByZWR1eC1zYWdhIGNoYW5uZWwnLCAoKSA9PiB7XG4gICAgY29uc3QgZXZlbnRDaGFubmVsTW9jayA9IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoJ2NoYW5uZWwnKTtcbiAgICBtb2NrZWQoZXZlbnRDaGFubmVsKS5tb2NrSW1wbGVtZW50YXRpb24oZXZlbnRDaGFubmVsTW9jayk7XG4gICAgY29uc3QgbW9ja05ldEluZm9DaGFubmVsRm4gPSBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKCdoYW5kbGVyRm4nKTtcbiAgICBleHBlY3QoY3JlYXRlTmV0SW5mb0Nvbm5lY3Rpb25DaGFuZ2VDaGFubmVsKG1vY2tOZXRJbmZvQ2hhbm5lbEZuKSkudG9CZShcbiAgICAgICdjaGFubmVsJyxcbiAgICApO1xuICAgIGV4cGVjdChldmVudENoYW5uZWxNb2NrKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChtb2NrTmV0SW5mb0NoYW5uZWxGbik7XG4gIH0pO1xuXG59KTtcblxuZGVzY3JpYmUoJ2NyZWF0ZUludGVydmFsQ2hhbm5lbCcsICgpID0+IHtcbiAgY29uc3QgaW50ZXJ2YWwgPSA1MDtcbiAgaXQoJ3JldHVybnMgYSByZWR1eC1zYWdhIGNoYW5uZWwnLCAoKSA9PiB7XG4gICAgY29uc3QgZXZlbnRDaGFubmVsTW9jayA9IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoJ2NoYW5uZWwnKTtcbiAgICBtb2NrZWQoZXZlbnRDaGFubmVsKS5tb2NrSW1wbGVtZW50YXRpb24oZXZlbnRDaGFubmVsTW9jayk7XG4gICAgY29uc3QgbW9ja0ludGVydmFsQ2hhbm5lbEZuID0gamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSgnaGFuZGxlckZuJyk7XG4gICAgZXhwZWN0KGNyZWF0ZUludGVydmFsQ2hhbm5lbChpbnRlcnZhbCwgbW9ja0ludGVydmFsQ2hhbm5lbEZuKSkudG9CZShcbiAgICAgICdjaGFubmVsJyxcbiAgICApO1xuICAgIGV4cGVjdChtb2NrSW50ZXJ2YWxDaGFubmVsRm4pLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKGludGVydmFsKTtcbiAgICBleHBlY3QoZXZlbnRDaGFubmVsKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnaGFuZGxlckZuJyk7XG4gIH0pO1xuXG4gIGl0KCdpbnRlcnZhbENoYW5uZWxGbiBhZGhlcmVzIHRvIGV2ZW50Q2hhbm5lbCBjYiBpbnRlcmZhY2UnLCBkb25lID0+IHtcbiAgICBnbG9iYWwuY2xlYXJJbnRlcnZhbCA9IGplc3QuZm4oKTtcbiAgICBjb25zdCBlbWl0TW9jayA9IGplc3QuZm4oKTtcbiAgICBjb25zdCB1bnN1YnNjcmliZSA9IGludGVydmFsQ2hhbm5lbEZuKGludGVydmFsKShlbWl0TW9jayk7XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBleHBlY3QoZW1pdE1vY2spLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHRydWUpO1xuICAgICAgZG9uZSgpO1xuICAgIH0sIGludGVydmFsICsgMjApO1xuICAgIHVuc3Vic2NyaWJlKCk7XG4gICAgZXhwZWN0KGdsb2JhbC5jbGVhckludGVydmFsKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gIH0pO1xufSk7XG4iXSwidmVyc2lvbiI6M30=